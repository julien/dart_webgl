<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8">
    <title>Glh - Texture example</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>    
    <canvas id="canvas" width="400" height="300"></canvas>
    
    <script id="vshader" type="x-shader/x-vertex">    
      attribute vec2 a_Position;
      varying mediump vec2 v_TextureCoord;

      void main () {
        v_TextureCoord = a_Position;

        gl_Position = vec4(2.0 * a_Position - 1.0, 0.0, 1.0);
        // gl_Position = vec4(a_Position, 0.0, 1.0);
      }
    </script>

    <script id="fshader" type="x-shader/x-fragment">
    #ifdef GL_ES
      precision mediump float;
    #endif

      varying mediump vec2 v_TextureCoord;
      uniform sampler2D u_Sampler;
      uniform vec2 u_Resolution;
      uniform float u_Time;
      uniform float u_Angle;

      void main () {
        vec2 pos = (-1.0 + 2.0) * gl_FragCoord.xy / u_Resolution.xy;
        // vec2 pos = v_TextureCoord.xy; 
        
        pos.x = pos.x + sin(pos.y * 10.0 +  u_Time * 3.0) * u_Angle;
        pos.y = pos.y + cos(pos.x * 5.0 + u_Time * 0.5) * u_Angle;
        gl_FragColor = texture2D(u_Sampler, pos);

        // original texture coordinates
        // gl_FragColor = texture2D(u_Sampler, v_TextureCoord);
      }
    </script>
  
    <script type="application/dart" src="texture01.dart"></script>
    <script src="packages/browser/dart.js"></script>
  </body>
</html>
